<mat-sidenav-container class="sidebar-example" (backdropClick)="close()">
    <mat-sidenav #sidenav (keydown.escape)="close()" position="end" disableClose>
        <app-add-project 
        (closePanel)="close()" 
        (notify)="update()"
        [itemact]="itemact">
        </app-add-project>
    </mat-sidenav>
    <mat-sidenav-content>
        <div id="admin-container">
            <div id="admin-main" class="bg-background">
                <app-nav-top>
                    <div [routerLink]="'../admin-home'" class="nav-option"><span>INCIDENTS</span></div>
                    <div class="nav-option"><span>USERS</span></div>       
                </app-nav-top>
                
                <hr class="bg-footer">
                <div class="container color-black">
                    <form class="example-form">
                        <div class="header grid-header">
                            <div>
                                <span>
                                    PROJECTS
                                </span>
                                <mat-select style="border-style: double; padding: 1px;" class="filter" name="centers" [(ngModel)]="filters.centers" (ngModelChange)="filter()" placeholder="CENTERS" disableOptionCentering>
                                    <mat-option [value]="null">ALL CENTERS</mat-option>
                                    <mat-option *ngFor="let center of centers" [value]="center">
                                        {{ center.center_name | uppercase }}
                                    </mat-option>
                                </mat-select>                  
                                <input name="searchText" [(ngModel)]="filters.searchText" (ngModelChange)="filter()" class="filter" type="text" placeholder="SEARCH"/>                        
                                </div>
                            <div>
                                <button type="button" (click)="sidenav.open();" class="btn-add bg-green-dark">ADD PROJECT</button>
                            </div>
                        </div>

                        
                    </form>
                    <section class="table-container mat-elevation-z8" tabindex="0">
                        <table mat-table [dataSource]="filteredDataSource">
                            <ng-container  matColumnDef="project">
                                <th mat-header-cell *matHeaderCellDef >PROJECT</th>
                                <td style="text-align: center;"  mat-cell *matCellDef="let element">{{element.p_name  | nulls }}</td>
                            </ng-container>     
														<ng-container  matColumnDef="abbreviation">
															<th mat-header-cell *matHeaderCellDef style="width: 10px;">ABBR.</th>
															<td style="text-align: center;"  mat-cell *matCellDef="let element">{{element.p_abbreviation || '-----' }}</td>
													</ng-container>     
                            <ng-container matColumnDef="season">
                                <th mat-header-cell *matHeaderCellDef style="width: 10px;" >SEASON </th>
                                <td style="text-align: center;"  mat-cell *matCellDef="let element">{{element.p_season | nulls}}</td>
                            </ng-container>
                            <ng-container matColumnDef="center">
                                <th mat-header-cell *matHeaderCellDef style="width: 80px;">CENTER</th>
                                <td style="text-align: center;"  mat-cell *matCellDef="let element"> {{element.center_name | nulls }}</td>
                            </ng-container>
                            <ng-container matColumnDef="location">
                                <th mat-header-cell *matHeaderCellDef style="width: 80px;">LOCATION</th>
                                <td style="text-align: center;"  mat-cell *matCellDef="let element"> {{element.location_name | nulls}} </td>
                            </ng-container>
                            <ng-container matColumnDef="alias">
                                <th mat-header-cell *matHeaderCellDef>ALIAS</th>
                                <td style="text-align: center;"  mat-cell *matCellDef="let element"> {{element.alias | nulls}} </td>
                            </ng-container>
                            <ng-container matColumnDef="assign">
                                <th mat-header-cell *matHeaderCellDef style="width: 80px;">ASSIGN</th>
                                <td style="text-align: center;" mat-cell *matCellDef="let element" >
                                    <ng-container *ngFor="let assing of element.assigns">
                                        <span class="img-text">{{assing.value_initials  || '-----' }}</span>
                                    </ng-container>
                                    <!-- <div *ngIf="item[head.list].length > 2" class="box-img box-imgg-asset" >
                                        <div (mouseleave)="_gS.hidemenu()" (mouseenter)="onClickUser($event, item)">
                                            <span>+{{item[head.list].length - 2}}</span>
                                        </div>
                                    </div> -->
                                </td>
                                </ng-container>
                            <ng-container  matColumnDef="open_inc">
                                <th mat-header-cell *matHeaderCellDef style="width: 20px;">OPEN INC.</th>
                                <td style="text-align: center;"  mat-cell *matCellDef="let element"> {{element.open_reports | nulls}} </td>
                            </ng-container>
                            <ng-container matColumnDef="closed_inc">
                                <th mat-header-cell *matHeaderCellDef style="width: 15px;">CLOSED INC.</th>
                                <td style="text-align: center;"  mat-cell *matCellDef="let element"> {{element.closed_reports | nulls}} </td>
                            </ng-container>
                            <ng-container matColumnDef="pk">
                                <th mat-header-cell *matHeaderCellDef style="width: 10px;"></th>
                                <td mat-cell *matCellDef="let element; let i = index">
                                    <div style="text-align: center;" class="btn-option">
                                        <button style="background-color: white;" (click)="sidenav.open(); showDetails(element)">
                                        <mat-icon aria-hidden="false" aria-label="comments" style="color: #3C9096;">drive_file_rename_outline</mat-icon>
                                    </button>
                                    </div>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                        </table>
                    </section>
                </div>
            </div>
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>
